<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSON Comparator</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    textarea { width: 100%; height: 150px; margin-bottom: 10px; }
    .result { margin-top: 20px; }
  </style>
</head>
<body>
  <h2>Compare JSON Objects (Order-Agnostic, including arrays)</h2>

  <textarea id="json1" placeholder="Enter first JSON object"></textarea>
  <textarea id="json2" placeholder="Enter second JSON object"></textarea>

  <button onclick="compareJSON()">Compare</button>

  <div class="result" id="result"></div>

  <script>
    // Function to collect all keys, sort them, and then stringify the JSON object
    function JSONstringifyOrder(obj, space) {
      const allKeys = new Set();
      JSON.stringify(obj, (key, value) => (allKeys.add(key), value)); // Collect all keys
      return JSON.stringify(obj, Array.from(allKeys).sort(), space);  // Sort and stringify
    }

    function compareJSON() {
      try {
        const json1 = JSON.parse(document.getElementById('json1').value);
        const json2 = JSON.parse(document.getElementById('json2').value);

        // Use the JSONstringifyOrder function to sort and compare both JSON objects
        const sortedJson1 = JSONstringifyOrder(json1, 2);  // Pretty print with space = 2
        const sortedJson2 = JSONstringifyOrder(json2, 2);

        // Compare the stringified, sorted JSON objects
        const result = sortedJson1 === sortedJson2;
        document.getElementById('result').innerHTML = result ? '<b>Match</b>' : '<b>No Match</b>';
      } catch (e) {
        document.getElementById('result').innerHTML = '<b>Error parsing JSON.</b>';
      }
    }
  </script>
</body>
</html>
